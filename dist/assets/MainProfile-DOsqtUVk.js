import{f as v,k as b,h as d,g as h,c as B,a as s,t as m,b as x,w as g,d as P,l as i,v as c,r as y,o as L,m as S,S as l}from"./index-EwENnZnS.js";const k={class:"row g-4"},A={class:"col-lg-4"},C={class:"card"},D={class:"card-header text-dark fw-bold d-flex justify-content-between align-items-center"},V=s("span",null,"My Profile",-1),M=["textContent"],U=["src"],N={class:"card-body text-center"},j=["textContent"],E={class:"col-lg-8"},T={class:"card"},F=s("h4",{class:"card-header text-dark fw-bold"},"Authentication",-1),I={class:"card-body"},K={class:"mb-3"},q=s("label",{for:"username",class:"form-label"},"Username",-1),z=["value"],G={class:"mb-3"},H=s("label",{for:"passwordLama",class:"form-label"},"Password Lama",-1),J={class:"mb-3"},O=s("label",{for:"passwordbaru",class:"form-label"},"Password Baru",-1),Q={class:"mb-3"},R=s("label",{for:"confirmPasswordBaru",class:"form-label"},"Konfirmasi Password Baru",-1),W=s("button",{type:"submit",class:"btn btn-primary float-end"},"Simpan",-1),Z={__name:"MainProfile",setup(X){const p=v(),_=b(),e=d({}),u=d(null),a=d({passwordLama:"",passwordBaru:"",confirmPasswordBaru:""}),r=()=>{a.value={passwordBaru:"",confirmPasswordBaru:"",passwordLama:""}},w=async()=>{if(a.value.passwordLama==""||a.value.passwordBaru==""||a.value.confirmPasswordBaru=="")return r(),l.fire({title:"Lengkapi Form terlebih dahulu",icon:"error"});if(a.value.passwordLama!=e.value.password)return r(),l.fire({title:"Password Lama Anda salah",icon:"error"});if(a.value.passwordBaru!=a.value.confirmPasswordBaru)return r(),l.fire({title:"Password Baru Anda tidak sama",icon:"error"});const n={password:a.value.passwordBaru};return await p.updateData("users","username",e.value.username,n),r(),l.fire({title:"Autentikasi Anda berhasil diubah",icon:"success"})};return h(async()=>{const{row:n,avatar:t}=await _.getUser();e.value=n,u.value=t}),(n,t)=>{const f=y("router-link");return L(),B("div",k,[s("div",A,[s("div",C,[s("h4",D,[V,s("span",{class:"badge text-bg-success text-uppercase fs-1",textContent:m(e.value.role)},null,8,M)]),s("img",{src:u.value,class:"card-img-top ratio ratio-1x1 object-fit-fill img-thumbnail"},null,8,U),s("div",N,[s("h5",{class:"card-title fw-bold mb-5",textContent:m(e.value.name)},null,8,j),x(f,{to:"/profile/edit",class:"btn btn-warning"},{default:g(()=>[S("Edit")]),_:1})])])]),s("div",E,[s("div",T,[F,s("div",I,[s("form",{onSubmit:P(w,["prevent"])},[s("div",K,[q,s("input",{type:"text",class:"form-control",id:"username",value:e.value.username,disabled:""},null,8,z)]),s("div",G,[H,i(s("input",{type:"password",class:"form-control",id:"passwordLama","onUpdate:modelValue":t[0]||(t[0]=o=>a.value.passwordLama=o)},null,512),[[c,a.value.passwordLama]])]),s("div",J,[O,i(s("input",{type:"password",class:"form-control",id:"passwordbaru","onUpdate:modelValue":t[1]||(t[1]=o=>a.value.passwordBaru=o)},null,512),[[c,a.value.passwordBaru]])]),s("div",Q,[R,i(s("input",{type:"password",class:"form-control",id:"confirmPasswordBaru","onUpdate:modelValue":t[2]||(t[2]=o=>a.value.confirmPasswordBaru=o)},null,512),[[c,a.value.confirmPasswordBaru]])]),W],32)])])])])}}};export{Z as default};
