import{f as x,h as m,g as v,r as w,c as e,a as t,b as C,w as S,F as b,y as g,t as r,o as a,m as P,n as T,S as B}from"./index-CiaZknQz.js";import{T as u}from"./ToastAlert-BgZyLVVA.js";const I={class:"card"},N={class:"card-body"},V=t("h4",{class:"card-title mb-4"},"List Pendelegasian Pegawai",-1),$={class:"table-responsive"},E={class:"table table-striped table-bordered"},L=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"NO ST"),t("th",{scope:"col"},"NO SPPD"),t("th",{scope:"col"},"Jumlah Pegawai"),t("th",{scope:"col",class:"text-center"},"Action")])],-1),M={key:0},j=["textContent"],F=["textContent"],H={class:"text-center"},O=["onClick"],q=t("button",{class:"btn-sm btn-warning me-2 btn"},"Edit",-1),z=t("button",{class:"btn-sm btn-info btn"},"Detail",-1),A={key:1},G={colspan:"4",class:"text-center"},s="delegasiPegawai",K={__name:"DelegasiViews",setup(J){const i=x(),o=m([]),d=m(!0);v(async()=>{console.log("onmounted delegasi"),o.value=await i.fetchData(s),d.value=!d.value});const h=["warning","primary","danger","info","success","secondary","light","dark"],p=()=>{const n=Math.floor(Math.random()*h.length);return h[n]},f=async n=>{if((await B.fire({title:`Hapus Data ${s}?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",cancelButtonColor:"red"})).isConfirmed)try{await i.deleteItemById(s,n)?(u.fire({icon:"success",title:`Data ${s} berhasil dihapus`}),o.value=await i.fetchData(s)):u.fire({icon:"error",title:"Gagal menghapus data"})}catch(l){console.error("Error deleting item:",l),u.fire({icon:"error",title:"Terjadi kesalahan saat menghapus data"})}};return(n,y)=>{const l=w("router-link");return a(),e("div",I,[t("div",N,[V,C(l,{to:{name:"addDelegasi"},class:"btn btn-primary mb-4"},{default:S(()=>[P("Tambah Data")]),_:1}),t("div",$,[t("table",E,[L,o.value.length>0?(a(),e("tbody",M,[(a(!0),e(b,null,g(o.value,(c,D)=>(a(),e("tr",{key:D},[t("td",{textContent:r(c.noST.noST)},null,8,j),t("td",null,[(a(!0),e(b,null,g(c.noSPPD,(_,k)=>(a(),e("span",{class:T([`bg-${p()}`,"badge fs-1"]),key:k},r(_.noSPPD),3))),128))]),t("td",{textContent:r(c.pegawai.length)},null,8,F),t("td",H,[t("button",{class:"btn-danger btn me-2 btn-sm",onClick:_=>f(c.id)}," Hapus ",8,O),q,z])]))),128))])):(a(),e("tbody",A,[t("tr",null,[t("td",G,r(d.value?"Loading Data...":"Data masih kosong"),1)])]))])])])])}}};export{K as default};
