import{A as Q,q as W,f as X,h as d,g as Z,B as b,c as i,a,l as s,v as n,F as M,y as U,t as p,m,x,S as _,C as L,o as r}from"./index-CiaZknQz.js";import{T as aa}from"./ToastAlert-BgZyLVVA.js";const ea={class:"card"},ta=a("h4",{class:"card-header fw-bold text-dark"},"Form Pendelegasian Pegawai",-1),la={class:"card-body"},oa={class:"accordion accordion-flush",id:"accordionFlushExample"},sa={class:"accordion-item"},na=a("h2",{class:"accordion-header"},[a("button",{class:"accordion-button px-0 bg-transparent text-dark fw-bold",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"true","aria-controls":"flush-collapseOne"},[a("span",{class:"rounded-circle fs-1 text-bg-primary me-2 d-flex justify-content-center align-items-center",style:{width:"25px",height:"25px"}},"1"),m(" Pilih Nomor ST ")])],-1),ia={id:"flush-collapseOne",class:"accordion-collapse collapse show","data-bs-parent":"#accordionFlushExample"},ra={class:"accordion-body px-0"},ca={key:0,class:"list-group"},ua=["onClick"],da={key:0},pa=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",class:"icon icon-tabler icons-tabler-filled icon-tabler-circle-check text-success"},[a("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a("path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z"})],-1),ma=[pa],ha={key:1,class:"text-center"},va={class:"accordion-item"},fa=a("h2",{class:"accordion-header"},[a("button",{class:"accordion-button px-0 bg-transparent text-dark fw-bold collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseTwo","aria-expanded":"false","aria-controls":"flush-collapseTwo"},[a("span",{class:"rounded-circle fs-1 text-bg-primary me-2 d-flex justify-content-center align-items-center",style:{width:"25px",height:"25px"}},"2"),m(" Pilih Nomor SPPD "),a("sup",{class:"text-info ms-1"},"*Opsional")])],-1),ga={id:"flush-collapseTwo",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},ba={class:"accordion-body px-0"},_a={key:0,class:"list-group"},ya=["onClick"],ka={key:0},xa=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",class:"icon icon-tabler icons-tabler-filled icon-tabler-circle-check text-success"},[a("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a("path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z"})],-1),wa=[xa],Pa={key:1,class:"text-center"},Da={class:"accordion-item"},Ta=a("h2",{class:"accordion-header"},[a("button",{class:"accordion-button px-0 bg-transparent text-dark fw-bold collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseThree","aria-expanded":"false","aria-controls":"flush-collapseThree"},[a("span",{class:"rounded-circle fs-1 text-bg-primary me-2 d-flex justify-content-center align-items-center",style:{width:"25px",height:"25px"}},"3"),m(" Pilih Pegawai ")])],-1),Sa={id:"flush-collapseThree",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},Va={class:"accordion-body px-0"},Ba={key:0,class:"list-group"},Ca=["onClick"],Na={key:0},Ra=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",class:"icon icon-tabler icons-tabler-filled icon-tabler-circle-check text-success"},[a("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a("path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z"})],-1),Ma=[Ra],Ua={key:1,class:"text-center"},La={key:0,class:"card mt-4",ref:"reviewSection"},ja=a("h4",{class:"card-header fw-bold text-dark"},"Review Pilihan",-1),Ha={class:"card-body"},Ia=a("strong",null,"NO ST",-1),Ea=a("strong",null,"NO SPPD",-1),za=a("strong",null,"Nama Pegawai",-1),Aa={class:"mt-4"},Ja=a("h5",{class:"mb-3"},"Input Biaya Sarana dan Prasarana",-1),Oa={class:"card mb-3"},Fa=a("div",{class:"card-header"},"Hotel/Penginapan",-1),Ka={class:"card-body"},$a={class:"mb-3"},qa=a("label",{for:"hotelName",class:"form-label"},"Nama Hotel/Penginapan",-1),Ya={class:"mb-3"},Ga=a("label",{for:"hotelVoucher",class:"form-label"},"No Voucher/Invoice Hotel",-1),Qa={class:"card mb-3"},Wa=a("div",{class:"card-header"},"Transportasi",-1),Xa={class:"card-body"},Za={class:"mb-3"},ae=a("label",{for:"transportationType",class:"form-label"},"Jenis Transportasi",-1),ee={class:"mb-3"},te=a("label",{for:"bookingCode",class:"form-label"},"Kode Booking",-1),le={class:"mb-3"},oe=a("label",{for:"seatNumber",class:"form-label"},"Nomor Kursi",-1),se={class:"mb-3"},ne=a("label",{for:"pricePP",class:"form-label"},"Harga PP",-1),ie={class:"mb-3"},re=a("label",{for:"priceDeparture",class:"form-label"},"Harga Tiket Berangkat",-1),ce={class:"mb-3"},ue=a("label",{for:"priceReturn",class:"form-label"},"Harga Tiket Pulang",-1),de={class:"mb-3"},pe=a("label",{for:"sumTransport",class:"form-label"},"Jumlah Uang Transport",-1),me={class:"card mb-3"},he=a("div",{class:"card-header"},"Penginapan",-1),ve={class:"card-body"},fe={class:"mb-3"},ge=a("label",{for:"rate",class:"form-label"},"Tarif Satuan Penginapan",-1),be={class:"mb-3"},_e=a("label",{for:"numDays",class:"form-label"},"Jumlah Hari/Malam",-1),ye={class:"mb-3"},ke=a("label",{for:"totalAccommodation",class:"form-label"},"Jumlah Harga Penginapan",-1),xe={class:"card mb-3"},we=a("div",{class:"card-header"},"Uang Harian",-1),Pe={class:"card-body"},De={class:"mb-3"},Te=a("label",{for:"dailyRate",class:"form-label"},"Satuan Uang Harian (Rp)",-1),Se={class:"mb-3"},Ve=a("label",{for:"dailyNumDays",class:"form-label"},"Jumlah Hari",-1),Be={class:"mb-3"},Ce=a("label",{for:"totalDaily",class:"form-label"},"Total Uang Harian",-1),Ne={class:"card mb-3"},Re=a("div",{class:"card-header"},"Biaya Lainnya (bila ada)",-1),Me={class:"card-body"},Ue={class:"mb-3"},Le=a("label",{for:"uraian",class:"form-label"},"Keterangan",-1),je={class:"mb-3"},He=a("label",{for:"dailyNumDays",class:"form-label"},"Jumlah",-1),Ae={__name:"AddDelegasiViews",setup(Ie){const{proxy:c}=Q(),A=W(),y=X(),w=d([]),P=d([]),D=d([]),v=d(!0);Z(async()=>{try{w.value=await y.fetchData("suratTugas"),P.value=await y.fetchData("sppd"),D.value=await y.fetchData("pegawai"),v.value=!v.value}catch(o){console.error("Error fetching data from IDB:",o),v.value=!v.value}});const T=d(""),S=d(""),V=d(""),g=d(null),f=d([]),h=d([]),j=b(()=>w.value.length?w.value.filter(o=>o.noST.toLowerCase().includes(T.value.toLowerCase())):[]),H=b(()=>P.value.length?P.value.filter(o=>o.noSPPD.toLowerCase().includes(S.value.toLowerCase())):[]),I=b(()=>D.value.length?D.value.filter(o=>o.namaPegawai.toLowerCase().includes(V.value.toLowerCase())):[]),J=o=>{g.value=o},O=o=>{const t=f.value.indexOf(o);t>-1?f.value.splice(t,1):f.value.push(o)},F=o=>{const t=h.value.indexOf(o);t>-1?h.value.splice(t,1):h.value.push(o)},l=d({hotelName:"",hotelVoucher:"",transportationType:"",bookingCode:"",seatNumber:"",pricePP:0,priceDeparture:0,priceReturn:0,totalPrice:0,rate:0,numDays:0,totalAccommodation:0,dailyRate:0,dailyNumDays:0,totalDaily:0,biayaLainnyaKeterangan:"",biayaLainnyaJumlah:0}),k=d(null),K=()=>{k.value.style.height="auto",k.value.style.height=`${k.value.scrollHeight}px`},$=async()=>{try{if(!(await _.fire({title:"Apakah data sudah betul?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",cancelButtonColor:"red"})).isConfirmed)return;const t=await q();if(t){const e=c.unformatRupiah(t);G();let R={...{totalSemuaDana:e,...l.value},noST:L(g.value),noSPPD:f.value.map(L),pegawai:h.value.map(L)};const z=await Y();z&&(R={...R,...z}),await y.addItem("delegasiPegawai",R),aa.fire({icon:"success",title:"Data Delegasi Berhasil dibuat "}),A.push({name:"delegasiPegawai"})}}catch(o){console.error("Terjadi kesalahan:",o)}},q=async()=>{const{value:o}=await _.fire({title:"Total Dana Yang Diterima",input:"text",inputValue:c.formatRupiah(0),inputValidator:t=>{if(!t)return"Input tidak boleh kosong";if(isNaN(c.unformatRupiah(t)))return"Input harus berupa angka"},showCancelButton:!0,confirmButtonText:"Lanjut",cancelButtonText:"Batal",cancelButtonColor:"red",didOpen:()=>{_.getInput().addEventListener("input",e=>{const u=e.target.value.replace(/[^0-9,]/g,"");e.target.value=c.formatRupiah(c.unformatRupiah(u))})}});return o},Y=async()=>{const{value:o}=await _.fire({title:"Informasi Lanjuttan!",html:`
      <input id="input1" class="swal2-input" type="text" placeholder="Jumlah Pengembalian">
      <input id="input2" class="swal2-input" type="text" placeholder="Nomor Billing">
      <input id="input3" class="swal2-input" type="text" placeholder="NTPN">
    `,focusConfirm:!1,preConfirm:()=>{const t=document.getElementById("input1").value,e=document.getElementById("input2").value,u=document.getElementById("input3").value;return!t||!e||!u?(_.showValidationMessage("Semua bidang harus diisi!"),!1):isNaN(c.unformatRupiah(t))?(_.showValidationMessage("Jumlah Kembalian harus berisikan angka !"),!1):{jumlahPengembalian:t,nomorBilling:e,ntpn:u}},showCancelButton:!0,confirmButtonText:"Simpan",cancelButtonText:"Lewati Saja",didOpen:()=>{document.getElementById("input1").addEventListener("input",e=>{const u=e.target.value.replace(/[^0-9,]/g,"");e.target.value=c.formatRupiah(c.unformatRupiah(u))})}});return o};function E(o,t,e){const u=t*e;return c.formatRupiah(u)}const B=b(()=>{const o=l.value.pricePP+l.value.priceDeparture+l.value.priceReturn;return c.formatRupiah(o)}),C=b(()=>E(l.value.totalAccommodation,l.value.rate,l.value.numDays)),N=b(()=>E(l.value.totalDaily,l.value.dailyRate,l.value.dailyNumDays));function G(){l.value.totalPrice=c.unformatRupiah(B.value),l.value.totalAccommodation=c.unformatRupiah(C.value),l.value.totalDaily=c.unformatRupiah(N.value)}return(o,t)=>(r(),i("div",null,[a("div",ea,[ta,a("div",la,[a("div",oa,[a("div",sa,[na,a("div",ia,[a("div",ra,[s(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>T.value=e),class:"form-control mb-3",type:"text",placeholder:"Cari ST..."},null,512),[[n,T.value]]),j.value.length?(r(),i("ul",ca,[(r(!0),i(M,null,U(j.value,e=>(r(),i("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center",onClick:u=>J(e),style:{cursor:"pointer"}},[m(p(e.noST)+" ",1),g.value===e?(r(),i("span",da,ma)):x("",!0)],8,ua))),128))])):(r(),i("div",ha,p(v.value?"Loading":"Data ST masih kosong"),1))])])]),a("div",va,[fa,a("div",ga,[a("div",ba,[s(a("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>S.value=e),class:"form-control mb-3",type:"text",placeholder:"Cari SPPD..."},null,512),[[n,S.value]]),H.value.length?(r(),i("ul",_a,[(r(!0),i(M,null,U(H.value,e=>(r(),i("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center",onClick:u=>O(e),style:{cursor:"pointer"}},[m(p(e.noSPPD)+" ",1),f.value.includes(e)?(r(),i("span",ka,wa)):x("",!0)],8,ya))),128))])):(r(),i("div",Pa,p(v.value?"Loading":"Data SPPD masih kosong"),1))])])]),a("div",Da,[Ta,a("div",Sa,[a("div",Va,[s(a("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>V.value=e),class:"form-control mb-3",type:"text",placeholder:"Cari Pegawai..."},null,512),[[n,V.value]]),I.value.length?(r(),i("ul",Ba,[(r(!0),i(M,null,U(I.value,e=>(r(),i("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center",onClick:u=>F(e),style:{cursor:"pointer"}},[m(p(e.namaPegawai)+" ",1),h.value.includes(e)?(r(),i("span",Na,Ma)):x("",!0)],8,Ca))),128))])):(r(),i("div",Ua,p(v.value?"Loading":"Data Pegawai masih kosong"),1))])])])])])]),g.value&&h.value.length?(r(),i("div",La,[ja,a("div",Ha,[a("p",null,[Ia,m(" : "+p(g.value?g.value.noST:"Belum ada"),1)]),a("p",null,[Ea,m(" : "+p(f.value.length?f.value.map(e=>e.noSPPD).join(", "):"Belum ada"),1)]),a("p",null,[za,m(" : "+p(h.value.length?h.value.map(e=>e.namaPegawai).join(", "):"Belum ada"),1)]),a("div",Aa,[Ja,a("div",Oa,[Fa,a("div",Ka,[a("div",$a,[qa,s(a("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.value.hotelName=e),type:"text",class:"form-control",id:"hotelName",placeholder:"Masukkan nama hotel/penginapan"},null,512),[[n,l.value.hotelName]])]),a("div",Ya,[Ga,s(a("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.value.hotelVoucher=e),type:"text",class:"form-control",id:"hotelVoucher",placeholder:"Masukkan no voucher/invoice hotel"},null,512),[[n,l.value.hotelVoucher]])])])]),a("div",Qa,[Wa,a("div",Xa,[a("div",Za,[ae,s(a("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.value.transportationType=e),type:"text",class:"form-control",id:"transportationType",placeholder:"Masukkan jenis transportasi"},null,512),[[n,l.value.transportationType]])]),a("div",ee,[te,s(a("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.value.bookingCode=e),type:"text",class:"form-control",id:"bookingCode",placeholder:"Masukkan kode booking"},null,512),[[n,l.value.bookingCode]])]),a("div",le,[oe,s(a("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.value.seatNumber=e),type:"text",class:"form-control",id:"seatNumber",placeholder:"Masukkan nomor kursi"},null,512),[[n,l.value.seatNumber]])]),a("div",se,[ne,s(a("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.value.pricePP=e),type:"number",class:"form-control",id:"pricePP",placeholder:"Masukkan harga PP"},null,512),[[n,l.value.pricePP]])]),a("div",ie,[re,s(a("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.value.priceDeparture=e),type:"number",class:"form-control",id:"priceDeparture",placeholder:"Masukkan harga tiket berangkat"},null,512),[[n,l.value.priceDeparture]])]),a("div",ce,[ue,s(a("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.value.priceReturn=e),type:"number",class:"form-control",id:"priceReturn",placeholder:"Masukkan harga tiket pulang"},null,512),[[n,l.value.priceReturn]])]),a("div",de,[pe,s(a("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>B.value=e),type:"text",class:"form-control",id:"sumTransport",readonly:""},null,512),[[n,B.value]])])])]),a("div",me,[he,a("div",ve,[a("div",fe,[ge,s(a("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.value.rate=e),type:"number",class:"form-control",id:"rate",placeholder:"Masukkan tarif satuan penginapan"},null,512),[[n,l.value.rate]])]),a("div",be,[_e,s(a("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.value.numDays=e),type:"number",class:"form-control",id:"numDays",placeholder:"Masukkan jumlah hari/malam"},null,512),[[n,l.value.numDays]])]),a("div",ye,[ke,s(a("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>C.value=e),type:"text",class:"form-control",id:"totalAccommodation",readonly:"",placeholder:"Masukkan jumlah harga penginapan"},null,512),[[n,C.value]])])])]),a("div",xe,[we,a("div",Pe,[a("div",De,[Te,s(a("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.value.dailyRate=e),type:"number",class:"form-control",id:"dailyRate",placeholder:"Masukkan satuan uang harian"},null,512),[[n,l.value.dailyRate]])]),a("div",Se,[Ve,s(a("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>l.value.dailyNumDays=e),type:"number",class:"form-control",id:"dailyNumDays",placeholder:"Masukkan jumlah hari"},null,512),[[n,l.value.dailyNumDays]])]),a("div",Be,[Ce,s(a("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>N.value=e),type:"text",class:"form-control",id:"totalDaily",readonly:"",placeholder:"Masukkan total uang harian"},null,512),[[n,N.value]])])])]),a("div",Ne,[Re,a("div",Me,[a("div",Ue,[Le,s(a("textarea",{id:"uraian","onUpdate:modelValue":t[18]||(t[18]=e=>l.value.biayaLainnyaKeterangan=e),class:"form-control",placeholder:"Isikan Keterangan Biaya Lainnya disini...",rows:"1",ref_key:"autoResizeTextarea",ref:k,onInput:K},null,544),[[n,l.value.biayaLainnyaKeterangan]])]),a("div",je,[He,s(a("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>l.value.biayaLainnyaJumlah=e),type:"number",class:"form-control",id:"dailyNumDays",placeholder:"Masukkan jumlah hari"},null,512),[[n,l.value.biayaLainnyaJumlah]])])])]),a("button",{type:"button",onClick:$,class:"btn-save mt-3"},"Save")])])],512)):x("",!0)]))}};export{Ae as default};
